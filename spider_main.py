#! /usr/bin/env python2
# coding: utf8

from lib import url_manager, html_downloader, html_parser, html_outputer

class SpiderMain(object):

	def __init__(self):
		self.urls = url_manager.UrlManager()
		self.downloader = html_downloader.HtmlDownloader()
		self.parser = html_parser.HtmlParser()
		self.outputer = html_outputer.HtmlOutputer()

	def craw (self, root_url):
		count = 1
		self.urls.add_new_url(root_url)
		while self.urls.has_new_url():
			try:
				new_url = self.urls.get_new_url()
				print 'craw %d : %s' % (count, new_url)
				html_cont = self.downloader.download(new_url)
				new_urls, new_data = self.parser.parse(new_url, html_cont)
				self.urls.add_new_urls(new_urls)
				self.outputer.collect_data(new_data)

				if count == 1000:
					break

				count = count + 1
			except:
				print 'craw failed'

		self.outputer.output_html()

	def get_list(self, root_url):
		print 'now get the all city list'
		print root_url
		# root_content = self.downloader.download(root_url)
		print '======= page content ======='
		# city_content = {'prov': {u'\u534e \u4e1c': [u'\u4e0a\u6d77\u5e02', u'\u6c5f\u82cf\u7701', u'\u6d59\u6c5f\u7701', u'\u5b89\u5fbd\u7701', u'\u798f\u5efa\u7701', u'\u6c5f\u897f\u7701', u'\u5c71\u4e1c\u7701'], u'\u897f \u5357': [u'\u91cd\u5e86\u5e02', u'\u56db\u5ddd\u7701', u'\u8d35\u5dde\u7701', u'\u4e91\u5357\u7701', u'\u897f\u85cf'], u'\u4e1c \u5317': [u'\u8fbd\u5b81\u7701', u'\u5409\u6797\u7701', u'\u9ed1\u9f99\u6c5f\u7701'], u'\u6e2f\u6fb3\u53f0': [u'\u53f0\u6e7e\u7701', u'\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a', u'\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a'], u'\u534e \u5317': [u'\u5317\u4eac\u5e02', u'\u5929\u6d25\u5e02', u'\u6cb3\u5317\u7701', u'\u5c71\u897f\u7701', u'\u5185\u8499\u53e4'], u'\u534e \u4e2d': [u'\u6cb3\u5357\u7701', u'\u6e56\u5317\u7701', u'\u6e56\u5357\u7701'], u'\u897f \u5317': [u'\u9655\u897f\u7701', u'\u7518\u8083\u7701', u'\u9752\u6d77\u7701', u'\u5b81\u590f', u'\u65b0\u7586'], u'\u534e \u5357': [u'\u5e7f\u4e1c\u7701', u'\u5e7f\u897f', u'\u6d77\u5357\u7701']}, 'node_id': {u'\u798f\u5efa\u7701': '35', u'\u53f0\u6e7e\u7701': '71', u'\u65b0\u7586': '65', u'\u5e7f\u4e1c\u7701': '44', u'\u91cd\u5e86\u5e02': '50', u'\u7518\u8083\u7701': '62', u'\u9ed1\u9f99\u6c5f\u7701': '23', u'\u6cb3\u5357\u7701': '41', u'\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a': '81', u'\u5b89\u5fbd\u7701': '34', u'\u6c5f\u82cf\u7701': '32', u'\u5317\u4eac\u5e02': '11', u'\u6e56\u5357\u7701': '43', u'\u6d59\u6c5f\u7701': '33', u'\u5e7f\u897f': '45', u'\u8d35\u5dde\u7701': '52', u'\u9655\u897f\u7701': '61', u'\u5c71\u897f\u7701': '14', u'\u9752\u6d77\u7701': '63', u'\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a': '82', u'\u6d77\u5357\u7701': '46', u'\u5b81\u590f': '64', u'\u5929\u6d25\u5e02': '12', u'\u8fbd\u5b81\u7701': '21', u'\u6c5f\u897f\u7701': '36', u'\u5185\u8499\u53e4': '15', u'\u5409\u6797\u7701': '22', u'\u6cb3\u5317\u7701': '13', u'\u56db\u5ddd\u7701': '51', u'\u4e91\u5357\u7701': '53', u'\u5c71\u4e1c\u7701': '37', u'\u897f\u85cf': '54', u'\u4e0a\u6d77\u5e02': '31', u'\u6e56\u5317\u7701': '42'}, 'area': [u'\u534e \u5317', u'\u4e1c \u5317', u'\u534e \u4e1c', u'\u534e \u5357', u'\u534e \u4e2d', u'\u897f \u5357', u'\u897f \u5317', u'\u6e2f\u6fb3\u53f0']}
		# city_content = self.parser.parse_prov(root_content)
		# town_content = self.parser.parse_town_pages_count(city_content)
		# town_content = {'prov': {u'\u534e \u4e2d': [u'\u6cb3\u5357\u7701', u'\u6e56\u5317\u7701', u'\u6e56\u5357\u7701'], u'\u534e \u4e1c': [u'\u4e0a\u6d77\u5e02', u'\u6c5f\u82cf\u7701', u'\u6d59\u6c5f\u7701', u'\u5b89\u5fbd\u7701', u'\u798f\u5efa\u7701', u'\u6c5f\u897f\u7701', u'\u5c71\u4e1c\u7701'], u'\u897f \u5357': [u'\u91cd\u5e86\u5e02', u'\u56db\u5ddd\u7701', u'\u8d35\u5dde\u7701', u'\u4e91\u5357\u7701', u'\u897f\u85cf'], u'\u4e1c \u5317': [u'\u8fbd\u5b81\u7701', u'\u5409\u6797\u7701', u'\u9ed1\u9f99\u6c5f\u7701'], u'\u6e2f\u6fb3\u53f0': [u'\u53f0\u6e7e\u7701', u'\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a', u'\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a'], u'\u534e \u5317': [u'\u5317\u4eac\u5e02', u'\u5929\u6d25\u5e02', u'\u6cb3\u5317\u7701', u'\u5c71\u897f\u7701', u'\u5185\u8499\u53e4'], u'\u534e \u5357': [u'\u5e7f\u4e1c\u7701', u'\u5e7f\u897f', u'\u6d77\u5357\u7701'], u'\u897f \u5317': [u'\u9655\u897f\u7701', u'\u7518\u8083\u7701', u'\u9752\u6d77\u7701', u'\u5b81\u590f', u'\u65b0\u7586']}, 'node_id': {u'\u5e7f\u897f': '45', u'\u8d35\u5dde\u7701': '52', u'\u9655\u897f\u7701': '61', u'\u56db\u5ddd\u7701': '51', u'\u5c71\u897f\u7701': '14', u'\u798f\u5efa\u7701': '35', u'\u53f0\u6e7e\u7701': '71', u'\u6e56\u5317\u7701': '42', u'\u9752\u6d77\u7701': '63', u'\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a': '82', u'\u65b0\u7586': '65', u'\u5b81\u590f': '64', u'\u5929\u6d25\u5e02': '12', u'\u4e0a\u6d77\u5e02': '31', u'\u8fbd\u5b81\u7701': '21', u'\u5e7f\u4e1c\u7701': '44', u'\u91cd\u5e86\u5e02': '50', u'\u7518\u8083\u7701': '62', u'\u6c5f\u897f\u7701': '36', u'\u5185\u8499\u53e4': '15', u'\u9ed1\u9f99\u6c5f\u7701': '23', u'\u6cb3\u5357\u7701': '41', u'\u897f\u85cf': '54', u'\u5409\u6797\u7701': '22', u'\u4e91\u5357\u7701': '53', u'\u5c71\u4e1c\u7701': '37', u'\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a': '81', u'\u5b89\u5fbd\u7701': '34', u'\u6c5f\u82cf\u7701': '32', u'\u6d77\u5357\u7701': '46', u'\u5317\u4eac\u5e02': '11', u'\u6e56\u5357\u7701': '43', u'\u6d59\u6c5f\u7701': '33', u'\u6cb3\u5317\u7701': '13'}, 'pages_count': {u'\u798f\u5efa\u7701': 4, u'\u53f0\u6e7e\u7701': 0, u'\u65b0\u7586': 1, u'\u5e7f\u4e1c\u7701': 2, u'\u91cd\u5e86\u5e02': 2, u'\u7518\u8083\u7701': 2, u'\u56db\u5ddd\u7701': 6, u'\u6cb3\u5357\u7701': 5, u'\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a': 0, u'\u5b89\u5fbd\u7701': 3, u'\u6c5f\u82cf\u7701': 8, u'\u5317\u4eac\u5e02': 2, u'\u6e56\u5357\u7701': 4, u'\u6d59\u6c5f\u7701': 6, u'\u5e7f\u897f': 3, u'\u8d35\u5dde\u7701': 2, u'\u9655\u897f\u7701': 3, u'\u5c71\u897f\u7701': 5, u'\u9752\u6d77\u7701': 1, u'\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a': 0, u'\u6d77\u5357\u7701': 1, u'\u5b81\u590f': 1, u'\u5929\u6d25\u5e02': 2, u'\u5185\u8499\u53e4': 2, u'\u8fbd\u5b81\u7701': 3, u'\u6c5f\u897f\u7701': 4, u'\u9ed1\u9f99\u6c5f\u7701': 3, u'\u5409\u6797\u7701': 2, u'\u6cb3\u5317\u7701': 7, u'\u4e91\u5357\u7701': 6, u'\u5c71\u4e1c\u7701': 6, u'\u897f\u85cf': 1, u'\u4e0a\u6d77\u5e02': 2, u'\u6e56\u5317\u7701': 5}, 'area': [u'\u534e \u5317', u'\u4e1c \u5317', u'\u534e \u4e1c', u'\u534e \u5357', u'\u534e \u4e2d', u'\u897f \u5357', u'\u897f \u5317', u'\u6e2f\u6fb3\u53f0']}
		# town_content = self.parser.parse_every_town_list(town_content)
		town_content = {'prov': {u'\u534e \u4e2d': [u'\u6cb3\u5357\u7701', u'\u6e56\u5317\u7701', u'\u6e56\u5357\u7701'], u'\u534e \u4e1c': [u'\u4e0a\u6d77\u5e02', u'\u6c5f\u82cf\u7701', u'\u6d59\u6c5f\u7701', u'\u5b89\u5fbd\u7701', u'\u798f\u5efa\u7701', u'\u6c5f\u897f\u7701', u'\u5c71\u4e1c\u7701'], u'\u897f \u5357': [u'\u91cd\u5e86\u5e02', u'\u56db\u5ddd\u7701', u'\u8d35\u5dde\u7701', u'\u4e91\u5357\u7701', u'\u897f\u85cf'], u'\u4e1c \u5317': [u'\u8fbd\u5b81\u7701', u'\u5409\u6797\u7701', u'\u9ed1\u9f99\u6c5f\u7701'], u'\u6e2f\u6fb3\u53f0': [u'\u53f0\u6e7e\u7701', u'\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a', u'\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a'], u'\u534e \u5317': [u'\u5317\u4eac\u5e02', u'\u5929\u6d25\u5e02', u'\u6cb3\u5317\u7701', u'\u5c71\u897f\u7701', u'\u5185\u8499\u53e4'], u'\u534e \u5357': [u'\u5e7f\u4e1c\u7701', u'\u5e7f\u897f', u'\u6d77\u5357\u7701'], u'\u897f \u5317': [u'\u9655\u897f\u7701', u'\u7518\u8083\u7701', u'\u9752\u6d77\u7701', u'\u5b81\u590f', u'\u65b0\u7586']}, 'node_id': {u'\u5e7f\u897f': '45', u'\u8d35\u5dde\u7701': '52', u'\u9655\u897f\u7701': '61', u'\u5c71\u897f\u7701': '14', u'\u798f\u5efa\u7701': '35', u'\u53f0\u6e7e\u7701': '71', u'\u9752\u6d77\u7701': '63', u'\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a': '82', u'\u5c71\u4e1c\u7701': '37', u'\u65b0\u7586': '65', u'\u5b81\u590f': '64', u'\u5317\u4eac\u5e02': '11', u'\u5929\u6d25\u5e02': '12', u'\u6d77\u5357\u7701': '46', u'\u8fbd\u5b81\u7701': '21', u'\u5e7f\u4e1c\u7701': '44', u'\u91cd\u5e86\u5e02': '50', u'\u7518\u8083\u7701': '62', u'\u6c5f\u897f\u7701': '36', u'\u5185\u8499\u53e4': '15', u'\u56db\u5ddd\u7701': '51', u'\u6cb3\u5357\u7701': '41', u'\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a': '81', u'\u4e91\u5357\u7701': '53', u'\u9ed1\u9f99\u6c5f\u7701': '23', u'\u897f\u85cf': '54', u'\u5b89\u5fbd\u7701': '34', u'\u6c5f\u82cf\u7701': '32', u'\u6e56\u5357\u7701': '43', u'\u5409\u6797\u7701': '22', u'\u4e0a\u6d77\u5e02': '31', u'\u6e56\u5317\u7701': '42', u'\u6d59\u6c5f\u7701': '33', u'\u6cb3\u5317\u7701': '13'}, 'area': [u'\u534e \u5317', u'\u4e1c \u5317', u'\u534e \u4e1c', u'\u534e \u5357', u'\u534e \u4e2d', u'\u897f \u5357', u'\u897f \u5317', u'\u6e2f\u6fb3\u53f0'], 'all_town_url': {u'\u798f\u5efa\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=35&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=35&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=35&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=35&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=4'], u'\u53f0\u6e7e\u7701': [], u'\u65b0\u7586': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=65&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1'], u'\u5e7f\u4e1c\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=44&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=44&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2'], u'\u91cd\u5e86\u5e02': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=50&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=50&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2'], u'\u7518\u8083\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=62&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=62&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2'], u'\u56db\u5ddd\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=51&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=51&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=51&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=51&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=4', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=51&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=5', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=51&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=6'], u'\u6cb3\u5357\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=41&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=41&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=41&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=41&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=4', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=41&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=5'], u'\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a': [], u'\u5b89\u5fbd\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=34&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=34&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=34&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3'], u'\u6c5f\u82cf\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=32&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=32&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=32&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=32&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=4', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=32&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=5', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=32&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=6', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=32&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=7', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=32&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=8'], u'\u5317\u4eac\u5e02': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=11&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=11&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2'], u'\u6e56\u5357\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=43&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=43&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=43&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=43&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=4'], u'\u6d59\u6c5f\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=33&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=33&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=33&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=33&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=4', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=33&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=5', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=33&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=6'], u'\u5e7f\u897f': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=45&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=45&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=45&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3'], u'\u8d35\u5dde\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=52&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=52&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2'], u'\u9655\u897f\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=61&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=61&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=61&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3'], u'\u5c71\u897f\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=14&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=14&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=14&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=14&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=4', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=14&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=5'], u'\u9ed1\u9f99\u6c5f\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=23&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=23&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=23&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3'], u'\u9752\u6d77\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=63&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1'], u'\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a': [], u'\u6d77\u5357\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=46&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1'], u'\u5b81\u590f': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=64&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1'], u'\u5929\u6d25\u5e02': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=12&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=12&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2'], u'\u8fbd\u5b81\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=21&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=21&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=21&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3'], u'\u6c5f\u897f\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=36&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=36&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=36&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=36&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=4'], u'\u5185\u8499\u53e4': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=15&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=15&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2'], u'\u5409\u6797\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=22&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=22&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2'], u'\u6cb3\u5317\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=13&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=13&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=13&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=13&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=4', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=13&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=5', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=13&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=6', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=13&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=7'], u'\u4e91\u5357\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=53&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=53&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=53&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=53&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=4', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=53&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=5', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=53&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=6'], u'\u5c71\u4e1c\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=37&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=37&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=37&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=37&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=4', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=37&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=5', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=37&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=6'], u'\u897f\u85cf': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=54&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1'], u'\u4e0a\u6d77\u5e02': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=31&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=31&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2'], u'\u6e56\u5317\u7701': ['http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=42&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=1', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=42&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=2', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=42&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=3', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=42&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=4', 'http://c.wanfangdata.com.cn/LocalChronicleRegion.aspx?NodeId=42&Category=\xe5\x9c\xb0\xe6\x83\x85\xe6\xa6\x82\xe5\x86\xb5&PageNo=5']}, 'pages_count': {u'\u5e7f\u897f': 3, u'\u8d35\u5dde\u7701': 2, u'\u9655\u897f\u7701': 3, u'\u5c71\u897f\u7701': 5, u'\u798f\u5efa\u7701': 4, u'\u53f0\u6e7e\u7701': 0, u'\u6e56\u5317\u7701': 5, u'\u9752\u6d77\u7701': 1, u'\u6fb3\u95e8\u7279\u522b\u884c\u653f\u533a': 0, u'\u5c71\u4e1c\u7701': 6, u'\u65b0\u7586': 1, u'\u5b81\u590f': 1, u'\u5929\u6d25\u5e02': 2, u'\u4e0a\u6d77\u5e02': 2, u'\u8fbd\u5b81\u7701': 3, u'\u5e7f\u4e1c\u7701': 2, u'\u91cd\u5e86\u5e02': 2, u'\u7518\u8083\u7701': 2, u'\u6c5f\u897f\u7701': 4, u'\u5185\u8499\u53e4': 2, u'\u56db\u5ddd\u7701': 6, u'\u6cb3\u5357\u7701': 5, u'\u897f\u85cf': 1, u'\u5409\u6797\u7701': 2, u'\u4e91\u5357\u7701': 6, u'\u9ed1\u9f99\u6c5f\u7701': 3, u'\u9999\u6e2f\u7279\u522b\u884c\u653f\u533a': 0, u'\u5b89\u5fbd\u7701': 3, u'\u6c5f\u82cf\u7701': 8, u'\u6d77\u5357\u7701': 1, u'\u5317\u4eac\u5e02': 2, u'\u6e56\u5357\u7701': 4, u'\u6d59\u6c5f\u7701': 6, u'\u6cb3\u5317\u7701': 7}}
		zhen_content = self.parser.parse_every_zhen_list(town_content)

		# print city_content
		self.outputer.output_city_html(town_content)
		print '======= content end ========'



if __name__ == "__main__":
	root_url = "http://c.wanfangdata.com.cn/NewLocalChronicle.aspx"
	obj_spider = SpiderMain()
	obj_spider.get_list(root_url)
	# obj_spider.craw(root_url)
